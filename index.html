<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•™å¸ˆå·¥å…·ç®±</title>
    <link rel="stylesheet" href="styles.css">
    <script src="student-manager.js"></script>
    <style>
        .container {
            max-width: 1300px;
            margin: 2.5rem auto;
            padding: 0 1.5rem;
        }
        
        /* å·¥å…·å¡ç‰‡å®¹å™¨ */
        .tools-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.2rem;
            margin: 2.5rem 0;
        }
        
        /* å·¥å…·å¡ç‰‡ */
        .tool-card {
            background: white;
            border-radius: 18px;
            padding: 2.5rem 2rem;
            text-align: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(0, 0, 0, 0.05);
            transform: translateY(0);
        }
        
        .tool-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #4b6cb7 0%, #182848 100%);
            border-radius: 18px 18px 0 0;
        }
        
        .tool-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
        }
        
        .tool-card h2 {
            color: #182848;
            margin-bottom: 1.3rem;
            font-size: 1.9rem;
            font-weight: 700;
        }
        
        .tool-card p {
            color: #555;
            margin-bottom: 1.8rem;
            line-height: 1.7;
            font-size: 1.15rem;
        }
        
        .tool-card button {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border: none;
            padding: 1.1rem 2.3rem;
            font-size: 1.15rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 5px 18px rgba(75, 108, 183, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .tool-card button:hover {
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(75, 108, 183, 0.6);
        }
        
        .tool-card button:active {
            transform: scale(0.95);
        }
        
        /* å·¥å…·å¡ç‰‡å›¾æ ‡ */
        .tool-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            color: #4b6cb7;
            transition: all 0.3s ease;
            display: block;
        }
        
        .tool-card:hover .tool-icon {
            transform: scale(1.2) rotate(5deg);
        }
        
        /* å­¦ç”Ÿç®¡ç†åŒºåŸŸ */
        .student-management-container {
            transition: all 0.4s ease;
        }
        
        .student-management-container.hidden {
            display: none;
        }
        
        .student-management {
            background: white;
            border-radius: 18px;
            padding: 2.5rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            margin: 2.5rem 0;
            backdrop-filter: blur(12px);
            border: 1px solid rgba(0, 0, 0, 0.05);
            position: relative;
            overflow: visible;
        }
        
        .student-management::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background: linear-gradient(90deg, #4CAF50 0%, #8BC34A 100%);
            border-radius: 18px 18px 0 0;
        }
        
        .student-management.hidden {
            transform: translateY(-20px);
            opacity: 0;
            pointer-events: none;
            max-height: 0;
            padding: 0 !important;
            margin: 0 !important;
            border: none;
            overflow: hidden;
            display: none;
        }
        
        .student-management h2 {
            color: #182848;
            margin-bottom: 1.8rem;
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
        }
        
        .student-input-section {
            margin-bottom: 2.2rem;
        }
        
        .input-group {
            display: flex;
            gap: 1.2rem;
            margin-bottom: 1.2rem;
            flex-wrap: wrap;
        }
        
        .input-group input {
            flex: 1;
            min-width: 150px;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .input-group input:focus {
            border-color: #4b6cb7;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
            outline: none;
        }
        
        .btn {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            box-shadow: 0 5px 15px rgba(75, 108, 183, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(75, 108, 183, 0.6);
        }
        
        .btn:active {
            transform: translateY(1px);
        }
        
        .btn:disabled {
            background: linear-gradient(135deg, #cccccc, #999999);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn.add {
            background: linear-gradient(135deg, #4CAF50, #8BC34A);
        }
        
        .btn.import {
            background: linear-gradient(135deg, #9C27B0, #E040FB);
        }
        
        .btn.clear {
            background: linear-gradient(135deg, #FF5722, #FF9800);
        }
        
        .btn.toggle-students {
            background: linear-gradient(135deg, #2196F3, #21CBF3);
            display: block;
            margin: 1.8rem auto;
            padding: 1.2rem 2.5rem;
            font-size: 1.2rem;
        }
        
        .btn.feedback {
            background: linear-gradient(135deg, #FF9800, #FFC107);
            display: block;
            margin: 1.2rem auto;
            padding: 1.1rem 2.2rem;
            font-size: 1.15rem;
        }
        
        .batch-import {
            margin: 1.3rem 0;
            padding: 1.3rem;
            background: rgba(227, 242, 253, 0.8);
            border-radius: 12px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(179, 219, 255, 0.5);
        }
        
        .batch-import h3 {
            color: #182848;
            margin-bottom: 0.8rem;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .batch-import textarea {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-family: monospace;
            margin-bottom: 1.2rem;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .batch-import textarea:focus {
            border-color: #4b6cb7;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
            outline: none;
        }
        
        .file-import {
            margin: 1.3rem 0;
            padding: 1.3rem;
            background: rgba(227, 242, 253, 0.8);
            border-radius: 12px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(179, 219, 255, 0.5);
        }
        
        .file-import h3 {
            color: #182848;
            margin-bottom: 0.8rem;
            font-size: 1.3rem;
            font-weight: 600;
        }
        
        .file-import input {
            width: 100%;
            margin-bottom: 1.2rem;
            padding: 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .file-import input:focus {
            border-color: #4b6cb7;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
            outline: none;
        }
        
        .student-list-container {
            max-height: 320px;
            overflow-y: auto;
            border: 1px solid #ddd;
            border-radius: 12px;
            padding: 1.2rem;
            background: rgba(248, 249, 250, 0.9);
            margin-top: 1.5rem;
            backdrop-filter: blur(5px);
            /* ç¡®ä¿æ»šåŠ¨æ¡å§‹ç»ˆå¯ç”¨ */
            -webkit-overflow-scrolling: touch;
            /* ç¡®ä¿åœ¨æ‰€æœ‰è®¾å¤‡ä¸Šéƒ½èƒ½æ­£å¸¸æ»šåŠ¨ */
            scrollbar-width: thin;
            scrollbar-color: #4b6cb7 rgba(248, 249, 250, 0.9);
        }
        
        /* è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼ï¼ˆWebKitæµè§ˆå™¨ï¼‰ */
        .student-list-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .student-list-container::-webkit-scrollbar-track {
            background: rgba(248, 249, 250, 0.9);
            border-radius: 4px;
        }
        
        .student-list-container::-webkit-scrollbar-thumb {
            background: #4b6cb7;
            border-radius: 4px;
        }
        
        .student-list-container::-webkit-scrollbar-thumb:hover {
            background: #3a5795;
        }
        
        .student-item {
            padding: 1rem;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideIn 0.3s ease;
            transition: all 0.2s ease;
        }
        
        .student-item:hover {
            background: rgba(227, 242, 253, 0.6);
            border-radius: 8px;
        }
        
        .student-item:last-child {
            border-bottom: none;
        }
        
        .student-info {
            flex: 1;
        }
        
        .student-id {
            font-weight: bold;
            color: #4b6cb7;
        }
        
        .remove-student {
            background: #ff416c;
            color: white;
            border: none;
            padding: 0.4rem 0.8rem;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.9rem;
        }
        
        .remove-student:hover {
            background: #ff1a4f;
            transform: scale(1.1);
        }
        
        .student-summary {
            display: flex;
            justify-content: center;
            gap: 2.2rem;
            margin-top: 1.8rem;
            flex-wrap: wrap;
        }
        
        .summary-card {
            background: rgba(227, 242, 253, 0.8);
            border-radius: 14px;
            padding: 1.7rem;
            text-align: center;
            min-width: 160px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(179, 219, 255, 0.5);
            transition: all 0.3s ease;
        }
        
        .summary-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }
        
        .summary-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: #182848;
        }
        
        .summary-label {
            font-size: 1.1rem;
            color: #555;
            margin-top: 0.5rem;
        }
        
        .instructions {
            background: rgba(227, 242, 253, 0.8);
            border-radius: 18px;
            padding: 2.2rem;
            margin-top: 2.8rem;
            text-align: left;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(179, 219, 255, 0.5);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .instructions h3 {
            color: #182848;
            margin-bottom: 1.8rem;
            font-size: 2rem;
            font-weight: 700;
        }
        
        .instructions ol {
            padding-left: 2.2rem;
        }
        
        .instructions li {
            margin-bottom: 1rem;
            line-height: 1.8;
            font-size: 1.2rem;
            color: #444;
        }
        
        .instructions strong {
            color: #4b6cb7;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <header>
        <h1>æ•™å¸ˆå·¥å…·ç®±</h1>
        <p>ä¸“ä¸ºæ•™å¸ˆè®¾è®¡çš„å®ç”¨å·¥å…·é›†åˆ</p>
        <div class="header-controls">
            <button class="language-switcher" id="languageSwitcher">English</button>
            <button class="theme-switcher" id="themeSwitcher">é»‘å¤œæ¨¡å¼</button>
            <button class="egg-button" id="eggButton" style="background: linear-gradient(135deg, #FFD700, #FFA500); border: none; padding: 0.5rem 1rem; border-radius: 20px; color: white; cursor: pointer; font-weight: 500; transition: all 0.3s ease; backdrop-filter: blur(5px); display: none;" onclick="triggerEasterEgg()">å½©è›‹</button>
        </div>
    </header>
    
    <!-- éšè—çš„å½©è›‹è§¦å‘å…ƒç´  -->
    <div id="easterEggTrigger" style="position: fixed; bottom: 10px; right: 10px; width: 50px; height: 50px; cursor: pointer; z-index: 9999;"></div>
    
    <div class="container">
        <!-- å·¥å…·å¡ç‰‡ -->
        <div class="tools-container">
            <div class="tool-card" id="sound-detector-card">
                <div class="tool-icon">ğŸ”Š</div>
                <h2 data-lang="sound_detector_title">å£°éŸ³æ£€æµ‹å™¨</h2>
                <p data-lang="sound_detector_desc">å®æ—¶æ£€æµ‹ç¯å¢ƒå£°éŸ³å¼ºåº¦ï¼Œå£°éŸ³è¶Šé«˜å°çƒè¶Šé«˜</p>
                <button onclick="navigateTo('sound-detector.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="roll-call-card">
                <div class="tool-icon">ğŸ²</div>
                <h2 data-lang="roll_call_title">éšæœºç‚¹åå™¨</h2>
                <p data-lang="roll_call_desc">éšæœºé€‰æ‹©å­¦ç”Ÿå›ç­”é—®é¢˜ï¼Œå¢åŠ è¯¾å ‚äº’åŠ¨</p>
                <button onclick="navigateTo('roll-call.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="timer-card">
                <div class="tool-icon">â±ï¸</div>
                <h2 data-lang="timer_title">è¯¾å ‚è®¡æ—¶å™¨</h2>
                <p data-lang="timer_desc">ç®¡ç†è¯¾å ‚æ´»åŠ¨æ—¶é—´ï¼Œæé«˜æ•™å­¦æ•ˆç‡</p>
                <button onclick="navigateTo('timer.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="grouping-card">
                <div class="tool-icon">ğŸ‘¥</div>
                <h2 data-lang="grouping_title">å°ç»„åˆ†ç»„å™¨</h2>
                <p data-lang="grouping_desc">éšæœºåˆ†ç»„å­¦ç”Ÿï¼Œä¾¿äºå°ç»„æ´»åŠ¨</p>
                <button onclick="navigateTo('grouping.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="whiteboard-card">
                <div class="tool-icon">âœï¸</div>
                <h2 data-lang="whiteboard_title">ç”µå­ç™½æ¿</h2>
                <p data-lang="whiteboard_desc">åœ¨çº¿ç»˜åˆ¶å’Œæ¼”ç¤ºï¼Œæ”¯æŒå¤šç‚¹è§¦æ§</p>
                <button onclick="navigateTo('whiteboard.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="tracker-card">
                <div class="tool-icon">ğŸ“ˆ</div>
                <h2 data-lang="tracker_title">è¯¾å ‚è¡¨ç°è®°å½•å™¨</h2>
                <p data-lang="tracker_desc">è®°å½•å­¦ç”Ÿè¯¾å ‚è¡¨ç°ï¼Œæå‡æ•™å­¦æ•ˆæœ</p>
                <button onclick="navigateTo('classroom-tracker.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="copybook-card">
                <div class="tool-icon">âœï¸</div>
                <h2 data-lang="copybook_title">ä¸´æ‘¹æœ¬ç”Ÿæˆå™¨</h2>
                <p data-lang="copybook_desc">ç”Ÿæˆä¸­è‹±æ–‡ä¸´æ‘¹æœ¬ï¼Œæ”¯æŒè‡ªå®šä¹‰å­—ä½“</p>
                <button onclick="navigateTo('copybook-generator.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="math-card">
                <div class="tool-icon">ğŸ”¢</div>
                <h2 data-lang="math_title">è®¡ç®—é¢˜ç”Ÿæˆå™¨</h2>
                <p data-lang="math_desc">ç”Ÿæˆè‡ªå®šä¹‰è®¡ç®—é¢˜ï¼Œæ”¯æŒå¤šç§è¿ç®—ç¬¦</p>
                <button onclick="navigateTo('math-generator.html')" data-lang="use_now">ç«‹å³ä½¿ç”¨</button>
            </div>
            
            <div class="tool-card" id="donation-card">
                <div class="tool-icon">â¤ï¸</div>
                <h2 data-lang="donation_title">æ‰“èµæ”¯æŒ</h2>
                <p data-lang="donation_desc">å¦‚æœæ‚¨å–œæ¬¢è¿™äº›å·¥å…·ï¼Œæ¬¢è¿æ‰“èµæ”¯æŒ</p>
                <button onclick="navigateTo('donation.html')" data-lang="support_now">å‰å¾€æ”¯æŒ</button>
            </div>
        </div>
        
        <!-- åˆ‡æ¢å­¦ç”Ÿç®¡ç†æŒ‰é’® -->
        <button id="toggleStudentsBtn" class="btn toggle-students" data-lang="manage_students">ç®¡ç†å­¦ç”Ÿä¿¡æ¯</button>
        
        <!-- å­¦ç”Ÿç®¡ç†åŒºåŸŸ -->
        <div class="student-management-container hidden">
            <div class="student-management" id="studentManagement">
                <h2 data-lang="student_management">å­¦ç”Ÿç®¡ç†</h2>
            
            <div class="student-input-section">
                <div class="input-group">
                    <input type="text" id="studentId" placeholder="å­¦å·ï¼ˆå¯é€‰ï¼‰" data-lang-placeholder="student_id_placeholder">
                    <input type="text" id="studentName" placeholder="å­¦ç”Ÿå§“å" data-lang-placeholder="student_name_placeholder">
                    <button id="addStudentBtn" class="btn add" data-lang="add_student">æ·»åŠ å­¦ç”Ÿ</button>
                </div>
                
                <div class="batch-import">
                    <h3 data-lang="batch_import_title">æ‰¹é‡å¯¼å…¥ï¼ˆCSVæ ¼å¼ï¼šå­¦å·,å§“åï¼‰</h3>
                    <textarea id="csvInput" placeholder="ä¾‹å¦‚ï¼š
2021001,å¼ ä¸‰
2021002,æå››
2021003,ç‹äº”" data-lang-placeholder="csv_example"></textarea>
                    <button id="importBtn" class="btn import" data-lang="import_csv">å¯¼å…¥CSV</button>
                </div>
                
                <div class="file-import">
                    <h3 data-lang="file_import_title">æ–‡ä»¶å¯¼å…¥ï¼ˆæ”¯æŒCSVã€TXTã€JSONæ ¼å¼ï¼‰</h3>
                    <input type="file" id="fileInput" accept=".csv,.txt,.json">
                    <button id="importFileBtn" class="btn import" data-lang="import_file">å¯¼å…¥æ–‡ä»¶</button>
                    <div id="fileInfo" style="margin-top: 0.8rem; font-size: 1rem; color: #666;"></div>
                </div>
                
                <button id="clearStudentsBtn" class="btn clear" data-lang="clear_students">æ¸…ç©ºå­¦ç”Ÿåˆ—è¡¨</button>
            </div>
            
            <div class="student-list-container">
                <div id="studentList">
                    <div class="empty-list" data-lang="no_students">æš‚æ— å­¦ç”Ÿï¼Œè¯·æ·»åŠ å­¦ç”Ÿ</div>
                </div>
            </div>
            
            <div class="student-summary">
                <div class="summary-card">
                    <div class="summary-value" id="totalStudents">0</div>
                    <div class="summary-label" data-lang="total_students">æ€»å­¦ç”Ÿæ•°</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value" id="totalGroups">0</div>
                    <div class="summary-label" data-lang="suggested_groups">å»ºè®®åˆ†ç»„æ•°</div>
                </div>
            </div>
        </div>
    </div>
        
        <!-- åé¦ˆå»ºè®®æŒ‰é’® -->
        <button id="feedbackBtn" class="btn feedback" data-lang="feedback">åé¦ˆå»ºè®®</button>
        
        
    </div>
    
    <div class="container">
        <div class="instructions">
            <h3 data-lang="instructions">ä½¿ç”¨è¯´æ˜</h3>
            <ol>
                <li><strong data-lang="student_management_guide">å­¦ç”Ÿç®¡ç†</strong> - <span data-lang="student_management_desc">ç‚¹å‡»"ç®¡ç†å­¦ç”Ÿä¿¡æ¯"æŒ‰é’®æ˜¾ç¤ºå­¦ç”Ÿç®¡ç†ç•Œé¢ï¼Œæ”¯æŒå•ä¸ªæ·»åŠ ã€æ‰¹é‡å¯¼å…¥å’Œæ–‡ä»¶å¯¼å…¥</span></li>
                <li><strong data-lang="sound_detector_guide">å£°éŸ³æ£€æµ‹å™¨</strong> - <span data-lang="sound_detector_desc2">å®æ—¶æ£€æµ‹ç¯å¢ƒå£°éŸ³å¼ºåº¦ï¼Œå£°éŸ³è¶Šé«˜å°çƒè¶Šé«˜ï¼Œå¯ç”¨äºè¯¾å ‚æ´»è·ƒåº¦ç›‘æµ‹</span></li>
                <li><strong data-lang="roll_call_guide">éšæœºç‚¹åå™¨</strong> - <span data-lang="roll_call_desc2">éšæœºé€‰æ‹©å­¦ç”Ÿå›ç­”é—®é¢˜ï¼Œå¢åŠ è¯¾å ‚äº’åŠ¨ï¼Œæ”¯æŒå¯¼å…¥å­¦ç”Ÿåå•</span></li>
                <li><strong data-lang="timer_guide">è¯¾å ‚è®¡æ—¶å™¨</strong> - <span data-lang="timer_desc2">ç®¡ç†è¯¾å ‚æ´»åŠ¨æ—¶é—´ï¼Œæé«˜æ•™å­¦æ•ˆç‡ï¼Œæ”¯æŒå…¨å±æ¨¡å¼å’Œé¢„è®¾æ—¶é—´</span></li>
                <li><strong data-lang="grouping_guide">å°ç»„åˆ†ç»„å™¨</strong> - <span data-lang="grouping_desc2">éšæœºåˆ†ç»„å­¦ç”Ÿï¼Œä¾¿äºå°ç»„æ´»åŠ¨ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ†ç»„äººæ•°</span></li>
                <li><strong data-lang="whiteboard_guide">ç”µå­ç™½æ¿</strong> - <span data-lang="whiteboard_desc2">åœ¨çº¿ç»˜åˆ¶å’Œæ¼”ç¤ºï¼Œæ”¯æŒå¤šç‚¹è§¦æ§ã€å¤šç§é¢œè‰²å’Œçº¿æ¡ç²—ç»†è°ƒèŠ‚</span></li>
                <li><strong data-lang="tracker_guide">è¯¾å ‚è¡¨ç°è®°å½•å™¨</strong> - <span data-lang="tracker_desc2">è®°å½•å­¦ç”Ÿè¯¾å ‚è¡¨ç°ï¼Œå¸®åŠ©æ•™å¸ˆäº†è§£å­¦ç”Ÿå‚ä¸åº¦</span></li>
                <li><strong data-lang="feedback_guide">åé¦ˆå»ºè®®</strong> - <span data-lang="feedback_desc">ç‚¹å‡»"åé¦ˆå»ºè®®"æŒ‰é’®æäº¤æ‚¨çš„å®è´µæ„è§</span></li>
            </ol>
        </div>
    </div>
    
    <footer>
        <p data-lang="footer_text">&copy; 2025 æ•™å¸ˆå·¥å…·ç®± - ä¸“ä¸ºæ•™å¸ˆè®¾è®¡</p>
    </footer>
    
    <script>
        // é¡µé¢åŠ è½½æ—¶é»˜è®¤éšè—å­¦ç”Ÿç®¡ç†åŒºåŸŸ
        document.addEventListener('DOMContentLoaded', function() {
            const studentManagementContainer = document.querySelector('.student-management-container');
            if (studentManagementContainer) {
                studentManagementContainer.classList.add('hidden');
            }
        });
        
        // å¤šè¯­è¨€æ”¯æŒ
        const languages = {
            zh: {
                sound_detector_title: "å£°éŸ³æ£€æµ‹å™¨",
                sound_detector_desc: "å®æ—¶æ£€æµ‹ç¯å¢ƒå£°éŸ³å¼ºåº¦ï¼Œå£°éŸ³è¶Šé«˜å°çƒè¶Šé«˜",
                roll_call_title: "éšæœºç‚¹åå™¨",
                roll_call_desc: "éšæœºé€‰æ‹©å­¦ç”Ÿå›ç­”é—®é¢˜ï¼Œå¢åŠ è¯¾å ‚äº’åŠ¨",
                timer_title: "è¯¾å ‚è®¡æ—¶å™¨",
                timer_desc: "ç®¡ç†è¯¾å ‚æ´»åŠ¨æ—¶é—´ï¼Œæé«˜æ•™å­¦æ•ˆç‡",
                grouping_title: "å°ç»„åˆ†ç»„å™¨",
                grouping_desc: "éšæœºåˆ†ç»„å­¦ç”Ÿï¼Œä¾¿äºå°ç»„æ´»åŠ¨",
                whiteboard_title: "ç”µå­ç™½æ¿",
                whiteboard_desc: "åœ¨çº¿ç»˜åˆ¶å’Œæ¼”ç¤ºï¼Œæ”¯æŒå¤šç‚¹è§¦æ§",
                tracker_title: "è¯¾å ‚è¡¨ç°è®°å½•å™¨",
                tracker_desc: "è®°å½•å­¦ç”Ÿè¯¾å ‚è¡¨ç°ï¼Œæå‡æ•™å­¦æ•ˆæœ",
                copybook_title: "ä¸´æ‘¹æœ¬ç”Ÿæˆå™¨",
                copybook_desc: "ç”Ÿæˆä¸­è‹±æ–‡ä¸´æ‘¹æœ¬ï¼Œæ”¯æŒè‡ªå®šä¹‰å­—ä½“",
                math_title: "è®¡ç®—é¢˜ç”Ÿæˆå™¨",
                math_desc: "ç”Ÿæˆè‡ªå®šä¹‰è®¡ç®—é¢˜ï¼Œæ”¯æŒå¤šç§è¿ç®—ç¬¦",
                donation_title: "æ‰“èµæ”¯æŒ",
                donation_desc: "å¦‚æœæ‚¨å–œæ¬¢è¿™äº›å·¥å…·ï¼Œæ¬¢è¿æ‰“èµæ”¯æŒ",
                use_now: "ç«‹å³ä½¿ç”¨",
                support_now: "å‰å¾€æ”¯æŒ",
                student_management: "å­¦ç”Ÿç®¡ç†",
                student_id_placeholder: "å­¦å·ï¼ˆå¯é€‰ï¼‰",
                student_name_placeholder: "å­¦ç”Ÿå§“å",
                add_student: "æ·»åŠ å­¦ç”Ÿ",
                batch_import_title: "æ‰¹é‡å¯¼å…¥ï¼ˆCSVæ ¼å¼ï¼šå­¦å·,å§“åï¼‰",
                csv_example: "ä¾‹å¦‚ï¼š\n2021001,å¼ ä¸‰\n2021002,æå››\n2021003,ç‹äº”",
                import_csv: "å¯¼å…¥CSV",
                file_import_title: "æ–‡ä»¶å¯¼å…¥ï¼ˆæ”¯æŒCSVã€TXTã€JSONæ ¼å¼ï¼‰",
                import_file: "å¯¼å…¥æ–‡ä»¶",
                clear_students: "æ¸…ç©ºå­¦ç”Ÿåˆ—è¡¨",
                no_students: "æš‚æ— å­¦ç”Ÿï¼Œè¯·æ·»åŠ å­¦ç”Ÿ",
                total_students: "æ€»å­¦ç”Ÿæ•°",
                suggested_groups: "å»ºè®®åˆ†ç»„æ•°",
                manage_students: "ç®¡ç†å­¦ç”Ÿä¿¡æ¯",
                feedback: "åé¦ˆå»ºè®®",
                donation_support: "æ‰“èµæ”¯æŒ",
                instructions: "ä½¿ç”¨è¯´æ˜",
                student_management_guide: "å­¦ç”Ÿç®¡ç†",
                student_management_desc: "ç‚¹å‡»\"ç®¡ç†å­¦ç”Ÿä¿¡æ¯\"æŒ‰é’®æ˜¾ç¤ºå­¦ç”Ÿç®¡ç†ç•Œé¢ï¼Œæ”¯æŒå•ä¸ªæ·»åŠ ã€æ‰¹é‡å¯¼å…¥å’Œæ–‡ä»¶å¯¼å…¥",
                sound_detector_guide: "å£°éŸ³æ£€æµ‹å™¨",
                sound_detector_desc2: "å®æ—¶æ£€æµ‹ç¯å¢ƒå£°éŸ³å¼ºåº¦ï¼Œå£°éŸ³è¶Šé«˜å°çƒè¶Šé«˜ï¼Œå¯ç”¨äºè¯¾å ‚æ´»è·ƒåº¦ç›‘æµ‹",
                roll_call_guide: "éšæœºç‚¹åå™¨",
                roll_call_desc2: "éšæœºé€‰æ‹©å­¦ç”Ÿå›ç­”é—®é¢˜ï¼Œå¢åŠ è¯¾å ‚äº’åŠ¨ï¼Œæ”¯æŒå¯¼å…¥å­¦ç”Ÿåå•",
                timer_guide: "è¯¾å ‚è®¡æ—¶å™¨",
                timer_desc2: "ç®¡ç†è¯¾å ‚æ´»åŠ¨æ—¶é—´ï¼Œæé«˜æ•™å­¦æ•ˆç‡ï¼Œæ”¯æŒå…¨å±æ¨¡å¼å’Œé¢„è®¾æ—¶é—´",
                grouping_guide: "å°ç»„åˆ†ç»„å™¨",
                grouping_desc2: "éšæœºåˆ†ç»„å­¦ç”Ÿï¼Œä¾¿äºå°ç»„æ´»åŠ¨ï¼Œæ”¯æŒè‡ªå®šä¹‰åˆ†ç»„äººæ•°",
                whiteboard_guide: "ç”µå­ç™½æ¿",
                whiteboard_desc2: "åœ¨çº¿ç»˜åˆ¶å’Œæ¼”ç¤ºï¼Œæ”¯æŒå¤šç‚¹è§¦æ§ã€å¤šç§é¢œè‰²å’Œçº¿æ¡ç²—ç»†è°ƒèŠ‚",
                tracker_guide: "è¯¾å ‚è¡¨ç°è®°å½•å™¨",
                tracker_desc2: "è®°å½•å­¦ç”Ÿè¯¾å ‚è¡¨ç°ï¼Œå¸®åŠ©æ•™å¸ˆäº†è§£å­¦ç”Ÿå‚ä¸åº¦",
                feedback_guide: "åé¦ˆå»ºè®®",
                feedback_desc: "ç‚¹å‡»\"åé¦ˆå»ºè®®\"æŒ‰é’®æäº¤æ‚¨çš„å®è´µæ„è§",
                footer_text: "Â© 2025 æ•™å¸ˆå·¥å…·ç®± - ä¸“ä¸ºæ•™å¸ˆè®¾è®¡",
                teachers_day_title: "æ•™å¸ˆèŠ‚å¿«ä¹ï¼",
                teachers_day_message: "ç¥æ‚¨æ•™å¸ˆèŠ‚å¿«ä¹ï¼æ„Ÿè°¢æ‚¨å¯¹æ•™è‚²äº‹ä¸šçš„æ— ç§å¥‰çŒ®å’Œè¾›å‹¤ä»˜å‡ºã€‚"
            },
            en: {
                sound_detector_title: "Sound Detector",
                sound_detector_desc: "Real-time detection of ambient sound intensity, the higher the sound, the higher the ball",
                roll_call_title: "Random Roll Call",
                roll_call_desc: "Randomly select students to answer questions, increase classroom interaction",
                timer_title: "Classroom Timer",
                timer_desc: "Manage classroom activity time, improve teaching efficiency",
                grouping_title: "Group Generator",
                grouping_desc: "Randomly group students for group activities",
                whiteboard_title: "Digital Whiteboard",
                whiteboard_desc: "Online drawing and presentation, supports multi-touch",
                tracker_title: "Classroom Performance Tracker",
                tracker_desc: "Record student classroom performance, improve teaching effectiveness",
                copybook_title: "Copybook Generator",
                copybook_desc: "Generate Chinese and English copybooks, support custom fonts",
                math_title: "Math Problem Generator",
                math_desc: "Generate customizable math problems, supports multiple operators",
                donation_title: "Support Donation",
                donation_desc: "If you like these tools, please consider supporting us",
                use_now: "Use Now",
                support_now: "Go to Support",
                student_management: "Student Management",
                student_id_placeholder: "Student ID (optional)",
                student_name_placeholder: "Student Name",
                add_student: "Add Student",
                batch_import_title: "Batch Import (CSV format: ID,Name)",
                csv_example: "Example:\n2021001,John\n2021002,Jane\n2021003,Bob",
                import_csv: "Import CSV",
                file_import_title: "File Import (supports CSV, TXT, JSON formats)",
                import_file: "Import File",
                clear_students: "Clear Student List",
                no_students: "No students, please add students",
                total_students: "Total Students",
                suggested_groups: "Suggested Groups",
                manage_students: "Manage Students",
                feedback: "Feedback",
                donation_support: "Support Donation",
                instructions: "Instructions",
                student_management_guide: "Student Management",
                student_management_desc: "Click the \"Manage Students\" button to show the student management interface, supports single add, batch import and file import",
                sound_detector_guide: "Sound Detector",
                sound_detector_desc2: "Real-time detection of ambient sound intensity, the higher the sound, the higher the ball, can be used for classroom activity monitoring",
                roll_call_guide: "Random Roll Call",
                roll_call_desc2: "Randomly select students to answer questions, increase classroom interaction, supports importing student list",
                timer_guide: "Classroom Timer",
                timer_desc2: "Manage classroom activity time, improve teaching efficiency, supports fullscreen mode and preset time",
                grouping_guide: "Group Generator",
                grouping_desc2: "Randomly group students for group activities, supports custom group size",
                whiteboard_guide: "Digital Whiteboard",
                whiteboard_desc2: "Online drawing and presentation, supports multi-touch, multiple colors and line thickness adjustment",
                tracker_guide: "Classroom Performance Tracker",
                tracker_desc2: "Record student classroom performance, help teachers understand student participation",
                feedback_guide: "Feedback",
                feedback_desc: "Click the \"Feedback\" button to submit your valuable opinions",
                footer_text: "Â© 2025 Teacher Toolkit - Designed for Teachers",
                teachers_day_title: "Happy Teacher's Day!",
                teachers_day_message: "Happy Teacher's Day! Thank you for your selfless dedication and hard work in education."
            }
        };

        // å½“å‰è¯­è¨€
        let currentLanguage = 'zh';

        // åˆ‡æ¢è¯­è¨€
        function switchLanguage() {
            currentLanguage = currentLanguage === 'zh' ? 'en' : 'zh';
            applyLanguage();
            // ä¿å­˜è¯­è¨€è®¾ç½®åˆ°localStorage
            localStorage.setItem('preferredLanguage', currentLanguage);
        }

        // åº”ç”¨è¯­è¨€
        function applyLanguage() {
            // æ›´æ–°è¯­è¨€åˆ‡æ¢æŒ‰é’®æ–‡æœ¬
            const languageSwitcher = document.getElementById('languageSwitcher');
            if (languageSwitcher) {
                languageSwitcher.textContent = currentLanguage === 'zh' ? 'English' : 'ä¸­æ–‡';
            }
            
            // æ›´æ–°æ‰€æœ‰å¸¦æœ‰data-langå±æ€§çš„å…ƒç´ 
            const elements = document.querySelectorAll('[data-lang]');
            elements.forEach(element => {
                const key = element.getAttribute('data-lang');
                if (languages[currentLanguage][key]) {
                    element.textContent = languages[currentLanguage][key];
                }
            });
            
            // æ›´æ–°å¸¦æœ‰data-lang-placeholderå±æ€§çš„å…ƒç´ 
            const placeholderElements = document.querySelectorAll('[data-lang-placeholder]');
            placeholderElements.forEach(element => {
                const key = element.getAttribute('data-lang-placeholder');
                if (languages[currentLanguage][key]) {
                    element.placeholder = languages[currentLanguage][key];
                }
            });
        }

        // æ£€æŸ¥æ˜¯å¦æ˜¯æ•™å¸ˆèŠ‚ï¼ˆ9æœˆ10æ—¥ï¼‰
        function checkTeachersDay() {
            const today = new Date();
            const month = today.getMonth() + 1; // æœˆä»½ä»0å¼€å§‹ï¼Œæ‰€ä»¥éœ€è¦+1
            const day = today.getDate();
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯9æœˆ10æ—¥
            if (month === 9 && day === 10) {
                // æ£€æŸ¥æ˜¯å¦å·²ç»æ˜¾ç¤ºè¿‡æ•™å¸ˆèŠ‚ç¥ç¦
                const hasShownTeachersDay = localStorage.getItem('hasShownTeachersDay');
                if (!hasShownTeachersDay) {
                    // æ˜¾ç¤ºæ•™å¸ˆèŠ‚ç¥ç¦å¼¹çª—
                    const title = languages[currentLanguage].teachers_day_title;
                    const message = languages[currentLanguage].teachers_day_message;
                    alert(`${title}\n\n${message}`);
                    
                    // æ ‡è®°ä¸ºå·²æ˜¾ç¤º
                    localStorage.setItem('hasShownTeachersDay', 'true');
                }
            } else {
                // å¦‚æœä¸æ˜¯æ•™å¸ˆèŠ‚ï¼Œæ¸…é™¤æ ‡è®°
                localStorage.removeItem('hasShownTeachersDay');
            }
        }

        // æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ–°åŠŸèƒ½ä»‹ç»
        function checkNewFeatures() {
            // æ£€æŸ¥æ˜¯å¦å·²ç»æ˜¾ç¤ºè¿‡æ–°åŠŸèƒ½ä»‹ç»
            const hasSeenNewFeatures = localStorage.getItem('hasSeenNewFeatures');
            
            // è·å–å½“å‰æ—¥æœŸ
            const now = new Date();
            const year = now.getFullYear();
            const month = String(now.getMonth() + 1).padStart(2, '0');
            const day = String(now.getDate()).padStart(2, '0');
            const today = `${year}-${month}-${day}`;
            
            // è·å–æ–°åŠŸèƒ½ä»‹ç»çš„å¼€å§‹æ—¥æœŸï¼ˆå‡è®¾ä»ä»Šå¤©å¼€å§‹ï¼‰
            const newFeaturesStartDate = localStorage.getItem('newFeaturesStartDate') || today;
            
            // ä¿å­˜å¼€å§‹æ—¥æœŸ
            if (!localStorage.getItem('newFeaturesStartDate')) {
                localStorage.setItem('newFeaturesStartDate', newFeaturesStartDate);
            }
            
            // è®¡ç®—æ—¥æœŸå·®
            const startDate = new Date(newFeaturesStartDate);
            const diffTime = Math.abs(now - startDate);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            
            // å¦‚æœ3å¤©å†…ä¸”ç”¨æˆ·è¿˜æ²¡çœ‹è¿‡ï¼Œåˆ™æ˜¾ç¤ºæ–°åŠŸèƒ½ä»‹ç»
            if (diffDays <= 3 && !hasSeenNewFeatures) {
                window.location.href = 'new-features.html';
            }
        }

        // è·å–DOMå…ƒç´ 
        const toggleStudentsBtn = document.getElementById('toggleStudentsBtn');
        const studentManagement = document.getElementById('studentManagement');
        const studentManagementContainer = studentManagement.parentElement;
        const studentId = document.getElementById('studentId');
        const studentName = document.getElementById('studentName');
        const addStudentBtn = document.getElementById('addStudentBtn');
        const csvInput = document.getElementById('csvInput');
        const importBtn = document.getElementById('importBtn');
        const fileInput = document.getElementById('fileInput');
        const importFileBtn = document.getElementById('importFileBtn');
        const clearStudentsBtn = document.getElementById('clearStudentsBtn');
        const studentList = document.getElementById('studentList');
        const totalStudentsEl = document.getElementById('totalStudents');
        const totalGroupsEl = document.getElementById('totalGroups');
        const fileInfo = document.getElementById('fileInfo');
        const feedbackBtn = document.getElementById('feedbackBtn');
        const languageSwitcher = document.getElementById('languageSwitcher');
        const themeSwitcher = document.getElementById('themeSwitcher');
        const eggButton = document.getElementById('eggButton');

        // åˆ‡æ¢å­¦ç”Ÿç®¡ç†ç•Œé¢æ˜¾ç¤º/éšè—
        function toggleStudentManagement(event) {
            const isHidden = studentManagementContainer.classList.contains('hidden');
            
            if (isHidden) {
                // æ˜¾ç¤ºå­¦ç”Ÿç®¡ç†åŒºåŸŸ
                studentManagementContainer.classList.remove('hidden');
                toggleStudentsBtn.textContent = currentLanguage === 'zh' ? 'éšè—å­¦ç”Ÿç®¡ç†' : 'Hide Student Management';
                
                // é‡æ–°æ¸²æŸ“å­¦ç”Ÿåˆ—è¡¨ä»¥ç¡®ä¿æ»šåŠ¨åŠŸèƒ½æ­£å¸¸
                renderStudentList();
            } else {
                // éšè—å­¦ç”Ÿç®¡ç†åŒºåŸŸ
                studentManagementContainer.classList.add('hidden');
                toggleStudentsBtn.textContent = currentLanguage === 'zh' ? 'ç®¡ç†å­¦ç”Ÿä¿¡æ¯' : 'Manage Students';
            }
            
            // é˜»æ­¢äº‹ä»¶å†’æ³¡
            if (event && event.stopPropagation) {
                event.stopPropagation();
            }
        }

        // ç®€åŒ–ç‰ˆè‡ªå®šä¹‰å¼¹çª—å‡½æ•°ï¼Œä½¿ç”¨ç³»ç»Ÿalertæ›¿ä»£
        function showCustomModal(title, message, callback) {
            // æ ¹æ®å½“å‰è¯­è¨€æ˜¾ç¤ºç›¸åº”çš„æ¶ˆæ¯
            const alertTitle = currentLanguage === 'zh' ? title : title;
            const alertMessage = currentLanguage === 'zh' ? message : message;
            
            alert(`${alertTitle}\n\n${alertMessage}`);
            if (callback && typeof callback === 'function') {
                callback();
            }
        }

        // æ·»åŠ å­¦ç”Ÿ
        function addStudent() {
            const id = studentId.value.trim();
            const name = studentName.value.trim();
            
            if (!name) {
                const title = currentLanguage === 'zh' ? 'æç¤º' : 'Notice';
                const message = currentLanguage === 'zh' ? 'è¯·è¾“å…¥å­¦ç”Ÿå§“å' : 'Please enter student name';
                showCustomModal(title, message);
                return;
            }
            
            // ç¦ç”¨æ·»åŠ æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
            addStudentBtn.disabled = true;
            addStudentBtn.textContent = currentLanguage === 'zh' ? 'æ·»åŠ ä¸­...' : 'Adding...';
            
            // ä½¿ç”¨StudentManageræ¥å¤„ç†å­¦ç”Ÿè¾“å…¥
            const student = { id, name };
            if (StudentManager.addStudent(student)) {
                renderStudentList();
                updateSummary();
                studentId.value = '';
                studentName.value = '';
                studentName.focus();
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                addStudentBtn.disabled = false;
                addStudentBtn.textContent = currentLanguage === 'zh' ? 'æ·»åŠ å­¦ç”Ÿ' : 'Add Student';
            } else {
                const title = currentLanguage === 'zh' ? 'æç¤º' : 'Notice';
                const message = currentLanguage === 'zh' ? 'å­¦ç”Ÿå·²å­˜åœ¨ï¼ˆå­¦å·æˆ–å§“åé‡å¤ï¼‰' : 'Student already exists (duplicate ID or name)';
                showCustomModal(title, message);
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                addStudentBtn.disabled = false;
                addStudentBtn.textContent = currentLanguage === 'zh' ? 'æ·»åŠ å­¦ç”Ÿ' : 'Add Student';
            }
        }

        // æ‰¹é‡å¯¼å…¥å­¦ç”Ÿ
        function importStudents() {
            const csvText = csvInput.value.trim();
            if (csvText === '') {
                const title = currentLanguage === 'zh' ? 'æç¤º' : 'Notice';
                const message = currentLanguage === 'zh' ? 'è¯·è¾“å…¥CSVæ•°æ®' : 'Please enter CSV data';
                showCustomModal(title, message);
                return;
            }
            
            // ç¦ç”¨å¯¼å…¥æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
            importBtn.disabled = true;
            importBtn.textContent = currentLanguage === 'zh' ? 'å¯¼å…¥ä¸­...' : 'Importing...';
            
            try {
                const students = StudentManager.parseCSV(csvText);
                if (students.length === 0) {
                    const title = currentLanguage === 'zh' ? 'æç¤º' : 'Notice';
                    const message = currentLanguage === 'zh' ? 'æœªè§£æåˆ°æœ‰æ•ˆå­¦ç”Ÿæ•°æ®' : 'No valid student data parsed';
                    showCustomModal(title, message);
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    importBtn.disabled = false;
                    importBtn.textContent = currentLanguage === 'zh' ? 'å¯¼å…¥CSV' : 'Import CSV';
                    return;
                }
                
                const addedCount = StudentManager.addStudents(students);
                renderStudentList();
                updateSummary();
                csvInput.value = '';
                const title = currentLanguage === 'zh' ? 'æˆåŠŸ' : 'Success';
                const message = currentLanguage === 'zh' ? 
                    `æˆåŠŸå¯¼å…¥ ${addedCount} åå­¦ç”Ÿ` : 
                    `Successfully imported ${addedCount} students`;
                showCustomModal(title, message);
            } catch (e) {
                const title = currentLanguage === 'zh' ? 'é”™è¯¯' : 'Error';
                const message = currentLanguage === 'zh' ? 
                    'å¯¼å…¥å¤±è´¥ï¼š' + e.message : 
                    'Import failed: ' + e.message;
                showCustomModal(title, message);
            } finally {
                // æ¢å¤æŒ‰é’®çŠ¶æ€
                importBtn.disabled = false;
                importBtn.textContent = currentLanguage === 'zh' ? 'å¯¼å…¥CSV' : 'Import CSV';
            }
        }

        // æ–‡ä»¶å¯¼å…¥å­¦ç”Ÿ
        function importFromFile() {
            const file = fileInput.files[0];
            if (!file) {
                const title = currentLanguage === 'zh' ? 'æç¤º' : 'Notice';
                const message = currentLanguage === 'zh' ? 'è¯·é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶' : 'Please select a file';
                showCustomModal(title, message);
                return;
            }
            
            // æ£€æŸ¥æ–‡ä»¶æ ¼å¼ï¼Œåªå…è®¸CSVã€TXTå’ŒJSONæ ¼å¼
            if (!file.name.endsWith('.csv') && !file.name.endsWith('.txt') && !file.name.endsWith('.json')) {
                const title = currentLanguage === 'zh' ? 'é”™è¯¯' : 'Error';
                const message = currentLanguage === 'zh' ? 
                    'æ–‡ä»¶æ ¼å¼ä¸æ”¯æŒï¼Œè¯·ä½¿ç”¨CSVã€TXTæˆ–JSONæ ¼å¼çš„æ–‡ä»¶' : 
                    'File format not supported, please use CSV, TXT or JSON format files';
                showCustomModal(title, message);
                fileInput.value = ''; // æ¸…ç©ºæ–‡ä»¶é€‰æ‹©
                fileInfo.textContent = '';
                return;
            }
            
            // æ˜¾ç¤ºæ–‡ä»¶ä¿¡æ¯
            const fileName = currentLanguage === 'zh' ? 'æ–‡ä»¶å' : 'File name';
            const fileSize = currentLanguage === 'zh' ? 'å¤§å°' : 'Size';
            const fileType = currentLanguage === 'zh' ? 'ç±»å‹' : 'Type';
            const unknown = currentLanguage === 'zh' ? 'æœªçŸ¥' : 'Unknown';
            
            fileInfo.textContent = `${fileName}: ${file.name} | ${fileSize}: ${(file.size / 1024).toFixed(1)} KB | ${fileType}: ${file.type || unknown}`;
            
            // ç¦ç”¨å¯¼å…¥æŒ‰é’®ï¼Œé˜²æ­¢é‡å¤ç‚¹å‡»
            importFileBtn.disabled = true;
            importFileBtn.textContent = currentLanguage === 'zh' ? 'å¯¼å…¥ä¸­...' : 'Importing...';
            
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const content = e.target.result;
                    let students = [];
                    
                    // æ ¹æ®æ–‡ä»¶æ‰©å±•åå¤„ç†ä¸åŒæ ¼å¼
                    if (file.name.endsWith('.json')) {
                        // JSONæ ¼å¼
                        students = StudentManager.parseJSON(content);
                    } else {
                        // CSVå’ŒTXTæ ¼å¼
                        students = StudentManager.parseCSV(content);
                    }
                    
                    if (students.length === 0) {
                        const title = currentLanguage === 'zh' ? 'æç¤º' : 'Notice';
                        const message = currentLanguage === 'zh' ? 'æœªè§£æåˆ°æœ‰æ•ˆå­¦ç”Ÿæ•°æ®' : 'No valid student data parsed';
                        showCustomModal(title, message);
                        // æ¢å¤æŒ‰é’®çŠ¶æ€
                        importFileBtn.disabled = false;
                        importFileBtn.textContent = currentLanguage === 'zh' ? 'å¯¼å…¥æ–‡ä»¶' : 'Import File';
                        return;
                    }
                    
                    const addedCount = StudentManager.addStudents(students);
                    renderStudentList();
                    updateSummary();
                    fileInput.value = '';
                    fileInfo.textContent = '';
                    const title = currentLanguage === 'zh' ? 'æˆåŠŸ' : 'Success';
                    const message = currentLanguage === 'zh' ? 
                        `æˆåŠŸå¯¼å…¥ ${addedCount} åå­¦ç”Ÿ` : 
                        `Successfully imported ${addedCount} students`;
                    showCustomModal(title, message);
                } catch (e) {
                    const title = currentLanguage === 'zh' ? 'é”™è¯¯' : 'Error';
                    const message = currentLanguage === 'zh' ? 
                        'å¯¼å…¥å¤±è´¥ï¼š' + e.message : 
                        'Import failed: ' + e.message;
                    showCustomModal(title, message);
                } finally {
                    // æ¢å¤æŒ‰é’®çŠ¶æ€
                    importFileBtn.disabled = false;
                    importFileBtn.textContent = currentLanguage === 'zh' ? 'å¯¼å…¥æ–‡ä»¶' : 'Import File';
                }
            };
            
            // è¯»å–æ–‡ä»¶å†…å®¹
            reader.readAsText(file, 'UTF-8');
        }

        // HTMLè½¬ä¹‰å‡½æ•°ï¼Œé˜²æ­¢XSSæ”»å‡»
        function escapeHtml(text) {
            const map = {
                '&': '&amp;',
                '<': '&lt;',
                '>': '&gt;',
                '"': '&quot;',
                "'": '&#039;'
            };
            return text.replace(/[&<>"]/g, function(m) { return map[m]; });
        }

        // åˆ é™¤å­¦ç”Ÿ
        function removeStudent(index) {
            const title = currentLanguage === 'zh' ? 'ç¡®è®¤åˆ é™¤' : 'Confirm Delete';
            const message = currentLanguage === 'zh' ? 'ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå­¦ç”Ÿå—ï¼Ÿ' : 'Are you sure you want to delete this student?';
            showCustomModal(title, message, function() {
                StudentManager.removeStudent(index);
                renderStudentList();
                updateSummary();
            });
        }

        // æ¸…ç©ºå­¦ç”Ÿåˆ—è¡¨
        function clearStudents() {
            const title = currentLanguage === 'zh' ? 'ç¡®è®¤æ¸…ç©º' : 'Confirm Clear';
            const message = currentLanguage === 'zh' ? 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å­¦ç”Ÿå—ï¼Ÿ' : 'Are you sure you want to clear all students?';
            showCustomModal(title, message, function() {
                StudentManager.clearStudents();
                renderStudentList();
                updateSummary();
            });
        }

        // ä¸ºè¯¾å ‚è¡¨ç°è®°å½•å™¨é€‰æ‹©å­¦ç”Ÿ
        function selectStudentForTracker(index) {
            const students = StudentManager.getStudents();
            if (index >= 0 && index < students.length) {
                const student = students[index];
                // ä¿å­˜é€‰ä¸­çš„å­¦ç”Ÿåˆ°localStorage
                try {
                    localStorage.setItem('classroom_tracker_current_student', JSON.stringify(student));
                    // è·³è½¬å›è¯¾å ‚è¡¨ç°è®°å½•å™¨
                    window.location.href = 'classroom-tracker.html';
                } catch (e) {
                    console.error('ä¿å­˜å­¦ç”Ÿæ•°æ®å¤±è´¥:', e);
                    showCustomModal('é”™è¯¯', 'é€‰æ‹©å­¦ç”Ÿå¤±è´¥ï¼Œè¯·é‡è¯•');
                }
            }
        }

        // æ¸²æŸ“å­¦ç”Ÿåˆ—è¡¨
        function renderStudentList() {
            const students = StudentManager.getStudents();
            studentList.innerHTML = '';
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯ä»å…¶ä»–å·¥å…·è·³è½¬è¿‡æ¥çš„
            const urlParams = new URLSearchParams(window.location.search);
            const fromTracker = urlParams.get('from') === 'tracker';
            const fromRollCall = urlParams.get('from') === 'rollcall';
            const fromGrouping = urlParams.get('from') === 'grouping';
            const fromOtherTool = fromTracker || fromRollCall || fromGrouping;
            
            if (students.length === 0) {
                const noStudentsText = currentLanguage === 'zh' ? 'æš‚æ— å­¦ç”Ÿï¼Œè¯·æ·»åŠ å­¦ç”Ÿ' : 'No students, please add students';
                studentList.innerHTML = `<div class="empty-list">${noStudentsText}</div>`;
                return;
            }
            
            students.forEach((student, index) => {
                const studentItem = document.createElement('div');
                studentItem.className = 'student-item';
                
                // è½¬ä¹‰å­¦ç”Ÿä¿¡æ¯ä»¥é˜²æ­¢XSSæ”»å‡»
                const escapedId = student.id ? escapeHtml(student.id) : '';
                const escapedName = escapeHtml(student.name);
                
                // å¦‚æœæ˜¯ä»å…¶ä»–å·¥å…·è·³è½¬è¿‡æ¥çš„ï¼Œæ·»åŠ ç›¸åº”çš„æŒ‰é’®
                if (fromOtherTool) {
                    const studentInfo = student.id ? 
                        `<span class="student-info"><span class="student-id">${escapedId}</span> - ${escapedName}</span>` : 
                        `<span class="student-info">${escapedName}</span>`;
                    
                    // æ ¹æ®æ¥æºå·¥å…·æ˜¾ç¤ºä¸åŒçš„æŒ‰é’®
                    if (fromTracker) {
                        const selectText = currentLanguage === 'zh' ? 'é€‰æ‹©' : 'Select';
                        const deleteText = currentLanguage === 'zh' ? 'åˆ é™¤' : 'Delete';
                        
                        studentItem.innerHTML = `
                            ${studentInfo}
                            <button class="btn" onclick="selectStudentForTracker(${index})" style="padding: 0.5rem 1rem; font-size: 0.9rem;">${selectText}</button>
                            <button class="remove-student" onclick="removeStudent(${index})">${deleteText}</button>
                        `;
                    } else {
                        // å¯¹äºéšæœºç‚¹åå™¨å’Œå°ç»„åˆ†ç»„å™¨ï¼Œåªéœ€è¦æ˜¾ç¤ºå­¦ç”Ÿä¿¡æ¯å’Œåˆ é™¤æŒ‰é’®
                        const deleteText = currentLanguage === 'zh' ? 'åˆ é™¤' : 'Delete';
                        
                        studentItem.innerHTML = `
                            ${studentInfo}
                            <button class="remove-student" onclick="removeStudent(${index})">${deleteText}</button>
                        `;
                    }
                } else {
                    const studentInfo = student.id ? 
                        `<span class="student-info"><span class="student-id">${escapedId}</span> - ${escapedName}</span>` : 
                        `<span class="student-info">${escapedName}</span>`;
                    
                    const deleteText = currentLanguage === 'zh' ? 'åˆ é™¤' : 'Delete';
                    
                    studentItem.innerHTML = `
                        ${studentInfo}
                        <button class="remove-student" onclick="removeStudent(${index})">${deleteText}</button>
                    `;
                }
                
                studentList.appendChild(studentItem);
            });
        }

        // æ›´æ–°ç»Ÿè®¡æ‘˜è¦
        function updateSummary() {
            const students = StudentManager.getStudents();
            totalStudentsEl.textContent = students.length;
            
            // å»ºè®®åˆ†ç»„æ•°ï¼ˆæ¯ç»„4-6äººï¼‰
            const suggestedGroups = Math.max(1, Math.floor(students.length / 5));
            totalGroupsEl.textContent = suggestedGroups;
        }

        // æ˜¾ç¤ºé‚®ä»¶æç¤º
        function showEmailPrompt() {
            const email = 'crisweiming@hotmail.com';
            const message1 = currentLanguage === 'zh' ? 'è¯·å‘é€é‚®ä»¶è‡³ï¼š' : 'Please send email to: ';
            const message2 = currentLanguage === 'zh' ? 'æˆ‘ä»¬éå¸¸æœŸå¾…æ‚¨çš„å®è´µæ„è§ï¼' : 'We look forward to your valuable feedback!';
            
            alert(`${message1}${email}\n\n${message2}`);
            // æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // å¯¼èˆªåˆ°å…¶ä»–é¡µé¢
        function navigateTo(page) {
            // æ£€æŸ¥æ˜¯å¦æ˜¯ä»è¯¾å ‚è¡¨ç°è®°å½•å™¨ã€éšæœºç‚¹åå™¨æˆ–å°ç»„åˆ†ç»„å™¨è·³è½¬è¿‡æ¥çš„
            const urlParams = new URLSearchParams(window.location.search);
            const fromTracker = urlParams.get('from') === 'tracker';
            const fromRollCall = urlParams.get('from') === 'rollcall';
            const fromGrouping = urlParams.get('from') === 'grouping';
            
            if (fromTracker || fromRollCall || fromGrouping) {
                // å¦‚æœæ˜¯ä»å…¶ä»–å·¥å…·è·³è½¬è¿‡æ¥çš„ï¼Œéœ€è¦ç‰¹æ®Šå¤„ç†
                let message = currentLanguage === 'zh' ? 
                    'è¯·åœ¨ä¸‹æ–¹å­¦ç”Ÿåˆ—è¡¨ä¸­æ·»åŠ æˆ–é€‰æ‹©å­¦ç”Ÿ' : 
                    'Please add or select students from the list below';
                    
                if (fromTracker) {
                    message = currentLanguage === 'zh' ? 
                        'è¯·åœ¨ä¸‹æ–¹å­¦ç”Ÿåˆ—è¡¨ä¸­é€‰æ‹©è¦è®°å½•è¡¨ç°çš„å­¦ç”Ÿ' : 
                        'Please select a student to track performance from the list below';
                } else if (fromRollCall) {
                    message = currentLanguage === 'zh' ? 
                        'è¯·åœ¨ä¸‹æ–¹å­¦ç”Ÿåˆ—è¡¨ä¸­æ·»åŠ å­¦ç”Ÿï¼Œç„¶åè¿”å›éšæœºç‚¹åå™¨' : 
                        'Please add students to the list below, then return to the roll call tool';
                } else if (fromGrouping) {
                    message = currentLanguage === 'zh' ? 
                        'è¯·åœ¨ä¸‹æ–¹å­¦ç”Ÿåˆ—è¡¨ä¸­æ·»åŠ å­¦ç”Ÿï¼Œç„¶åè¿”å›å°ç»„åˆ†ç»„å™¨' : 
                        'Please add students to the list below, then return to the group generator';
                }
                
                alert(message);
                // æ˜¾ç¤ºå­¦ç”Ÿç®¡ç†åŒºåŸŸ
                if (studentManagementContainer.classList.contains('hidden')) {
                    toggleStudentManagement();
                }
                return;
            }
            
            window.location.href = page;
        }

        // è§¦å‘å½©è›‹
        function triggerEasterEgg() {
            const messages = {
                zh: [
                    "æ­å–œä½ å‘ç°äº†å½©è›‹ï¼",
                    "ä½ çœŸæ˜¯ä¸€ä¸ªç»†å¿ƒçš„ç”¨æˆ·ï¼",
                    "æ„Ÿè°¢ä½ å¯¹æ•™å¸ˆå·¥å…·ç®±çš„æ”¯æŒï¼",
                    "å¸Œæœ›è¿™äº›å·¥å…·å¯¹ä½ çš„æ•™å­¦æœ‰å¸®åŠ©ï¼",
                    "ç¥ä½ æ•™å­¦æ„‰å¿«ï¼Œå·¥ä½œé¡ºåˆ©ï¼"
                ],
                en: [
                    "Congratulations on finding the easter egg!",
                    "You're really a careful user!",
                    "Thank you for your support of the Teacher Toolkit!",
                    "Hope these tools are helpful for your teaching!",
                    "Wish you a happy teaching and smooth work!"
                ]
            };
            
            const message = messages[currentLanguage][Math.floor(Math.random() * messages[currentLanguage].length)];
            alert(message);
        }

        // åˆ‡æ¢ä¸»é¢˜
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            
            // æ›´æ–°ä¸»é¢˜åˆ‡æ¢æŒ‰é’®æ–‡æœ¬
            if (document.body.classList.contains('dark-mode')) {
                themeSwitcher.textContent = currentLanguage === 'zh' ? 'æ—¥é—´æ¨¡å¼' : 'Light Mode';
            } else {
                themeSwitcher.textContent = currentLanguage === 'zh' ? 'é»‘å¤œæ¨¡å¼' : 'Dark Mode';
            }
            
            // ä¿å­˜ä¸»é¢˜è®¾ç½®åˆ°localStorage
            if (document.body.classList.contains('dark-mode')) {
                localStorage.setItem('theme', 'dark');
            } else {
                localStorage.setItem('theme', 'light');
            }
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = function() {
            // æ£€æŸ¥æ˜¯å¦ä¿å­˜äº†è¯­è¨€åå¥½
            const savedLanguage = localStorage.getItem('preferredLanguage');
            if (savedLanguage) {
                currentLanguage = savedLanguage;
            }
            
            // åº”ç”¨è¯­è¨€è®¾ç½®
            applyLanguage();
            
            // æ£€æŸ¥æ˜¯å¦æ˜¯æ•™å¸ˆèŠ‚
            checkTeachersDay();
            
            // æ£€æŸ¥æ˜¯å¦éœ€è¦æ˜¾ç¤ºæ–°åŠŸèƒ½ä»‹ç»
            checkNewFeatures();
            
            // æ£€æŸ¥å¹¶åº”ç”¨ä¿å­˜çš„ä¸»é¢˜è®¾ç½®
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                if (themeSwitcher) {
                    themeSwitcher.textContent = currentLanguage === 'zh' ? 'æ—¥é—´æ¨¡å¼' : 'Light Mode';
                }
            }
            
            // æ£€æŸ¥æ˜¯å¦æ˜¾ç¤ºå½©è›‹æŒ‰é’®
            const eggClickCount = localStorage.getItem('eggClickCount') || 0;
            if (eggClickCount >= 5) {
                document.getElementById('eggButton').style.display = 'block';
            }
            
            // ç»‘å®šå½©è›‹è§¦å‘å…ƒç´ äº‹ä»¶
            const easterEggTrigger = document.getElementById('easterEggTrigger');
            if (easterEggTrigger) {
                let clickCount = 0;
                easterEggTrigger.addEventListener('click', function() {
                    clickCount++;
                    if (clickCount >= 5) {
                        // ä¿å­˜ç‚¹å‡»æ¬¡æ•°
                        localStorage.setItem('eggClickCount', clickCount);
                        // æ˜¾ç¤ºå½©è›‹æŒ‰é’®
                        document.getElementById('eggButton').style.display = 'block';
                        // æ˜¾ç¤ºæç¤ºä¿¡æ¯
                        const message = currentLanguage === 'zh' ? 
                            'æ­å–œä½ è§£é”äº†å½©è›‹åŠŸèƒ½ï¼ç‚¹å‡»é¡¶éƒ¨çš„"å½©è›‹"æŒ‰é’®æŸ¥çœ‹æƒŠå–œã€‚' : 
                            'Congratulations on unlocking the easter egg! Click the "Easter Egg" button at the top to see the surprise.';
                        alert(message);
                    }
                });
            }
            
            // ç»‘å®šè¯­è¨€åˆ‡æ¢æŒ‰é’®äº‹ä»¶
            if (languageSwitcher) {
                languageSwitcher.addEventListener('click', switchLanguage);
            }
            
            // ç»‘å®šä¸»é¢˜åˆ‡æ¢æŒ‰é’®äº‹ä»¶
            if (themeSwitcher) {
                themeSwitcher.addEventListener('click', toggleTheme);
            }
            
            // åˆå§‹åŒ–å­¦ç”Ÿç®¡ç†å™¨å’Œå…¶ä»–åŠŸèƒ½
            // StudentManager.init(); // åœ¨student-manager.jsä¸­å·²ç»åˆå§‹åŒ–
        };
    </script>
</body>
</html>