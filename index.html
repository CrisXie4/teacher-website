<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <script defer src="https://cloud.umami.is/script.js" data-website-id="4a56b2a6-010f-412d-b1ae-59417d30a68d"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4b6cb7">
    <meta name="description" content="专为教师设计的实用工具集合">
    <meta name="keywords" content="教师工具,教学工具,课堂管理,随机点名,计时器,电子白板">
    <meta name="author" content="Teacher Toolkit Team">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="教师工具箱">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <link rel="manifest" href="config/manifest.json">
    <link rel="icon" href="assets/images/briefcase-192x192.png" type="image/png">
    <link rel="apple-touch-icon" href="assets/images/briefcase-192x192.png">
    <title>教师工具箱</title>
    <link rel="stylesheet" href="src/css/styles.css">
    <link rel="stylesheet" href="src/css/index.css">
    <script defer src="src/js/student-manager.js?v=2.0.3"></script>
    <script defer src="src/js/i18n.js?v=2.0.3"></script>
    <script defer src="src/js/index.js?v=2.0.3"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-actions">
                <button class="announcement-center-btn" id="announcementCenterBtn" onclick="openAnnouncementCenter()" title="公告中心" style="display: none;">
                    📢 <span data-lang="announcement_center">公告</span>
                    <span class="badge hidden" id="announcementBadge">1</span>
                </button>
                <button class="language-switcher" id="languageSwitcher">English</button>
                <button class="theme-switcher" id="themeSwitcher" data-lang="theme_dark">黑夜模式</button>
                <button class="spring-festival-trigger" id="springFestivalBtn" style="background: linear-gradient(135deg, #d32f2f, #b71c1c); border: none; padding: 0.5rem 1rem; border-radius: 20px; color: #ffd700; cursor: pointer; font-weight: 600; transition: all 0.3s ease; backdrop-filter: blur(5px); display: none;" onclick="triggerSpringFestival()" data-lang="spring_festival">春节</button>
                <button class="install-pwa-btn" id="installPwaBtn" style="background: linear-gradient(135deg, #4CAF50, #8BC34A); border: none; padding: 0.5rem 1rem; border-radius: 20px; color: white; cursor: pointer; font-weight: 500; transition: all 0.3s ease; backdrop-filter: blur(5px); display: none;" title="安装应用到桌面" data-lang="install_pwa">安装应用</button>
                <button class="egg-button" id="eggButton" style="background: linear-gradient(135deg, #FFD700, #FFA500); border: none; padding: 0.5rem 1rem; border-radius: 20px; color: white; cursor: pointer; font-weight: 500; transition: all 0.3s ease; backdrop-filter: blur(5px); display: none;" onclick="triggerEasterEgg()" data-lang="egg">彩蛋</button>
            </div>
            <h1 data-lang="site_title">教师工具箱</h1>
            <p data-lang="site_subtitle">专为教师设计的实用工具集合</p>
        </div>
    </header>
    
    <!-- 隐藏的彩蛋触发元素 -->
    <div id="easterEggTrigger" style="position: fixed; bottom: 10px; right: 10px; width: 50px; height: 50px; cursor: pointer; z-index: 9999;"></div>
    
    <div class="container">
        <div class="tool-search-wrapper">
            <label class="tool-search-label sr-only" for="toolSearchInput" data-lang="tool_search_label">搜索工具</label>
            <div class="tool-search-input-group">
                <input type="search" id="toolSearchInput" class="tool-search-input" data-lang-placeholder="tool_search_placeholder" placeholder="搜索工具（如：计时、点名、白板）" autocomplete="off">
                <button type="button" id="toolSearchClearBtn" class="tool-search-clear hidden" data-lang="tool_search_clear">清除</button>
            </div>
            <div id="toolSearchEmptyState" class="tool-search-empty hidden" data-lang="tool_search_no_result">未找到匹配工具，请换个关键词</div>
        </div>

        <!-- 工具卡片 -->
        <div class="tools-container">
            <div class="tool-card" id="sound-detector-card">
                <div class="tool-icon">🔊</div>
                <h2 data-lang="sound_detector_title">声音检测器</h2>
                <p data-lang="sound_detector_desc">实时检测环境声音强度，声音越高小球越高</p>
                <button onclick="navigateTo('src/pages/sound-detector.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="roll-call-card">
                <div class="tool-icon">🎲</div>
                <h2 data-lang="roll_call_title">随机点名器</h2>
                <p data-lang="roll_call_desc">随机选择学生回答问题，增加课堂互动</p>
                <button onclick="navigateTo('src/pages/roll-call.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="timer-card">
                <div class="tool-icon">⏱️</div>
                <h2 data-lang="timer_title">课堂计时器</h2>
                <p data-lang="timer_desc">管理课堂活动时间，提高教学效率</p>
                <button onclick="navigateTo('src/pages/timer.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="clock-card">
                <div class="tool-icon">🕐</div>
                <h2 data-lang="clock_title">全屏时钟</h2>
                <p data-lang="clock_desc">超大显示时钟，支持多种颜色和格式，一键全屏</p>
                <button onclick="navigateTo('src/pages/clock.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="grouping-card">
                <div class="tool-icon">👥</div>
                <h2 data-lang="grouping_title">小组分组器</h2>
                <p data-lang="grouping_desc">随机分组学生，便于小组活动</p>
                <button onclick="navigateTo('src/pages/grouping.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="whiteboard-card">
                <div class="tool-icon">✏️</div>
                <h2 data-lang="whiteboard_title">电子白板</h2>
                <p data-lang="whiteboard_desc">在线绘制和演示，支持多点触控</p>
                <button onclick="navigateTo('src/pages/whiteboard.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="tracker-card">
                <div class="tool-icon">📈</div>
                <h2 data-lang="tracker_title">课堂表现记录器</h2>
                <p data-lang="tracker_desc">记录学生课堂表现，提升教学效果</p>
                <button onclick="navigateTo('src/pages/classroom-tracker.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="copybook-card">
                <div class="tool-icon">✍️</div>
                <h2 data-lang="copybook_title">临摹本生成器</h2>
                <p data-lang="copybook_desc">生成中英文临摹本，支持自定义字体</p>
                <button onclick="navigateTo('src/pages/copybook-generator.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="math-card">
                <div class="tool-icon">🔢</div>
                <h2 data-lang="math_title">计算题生成器</h2>
                <p data-lang="math_desc">生成自定义计算题，支持多种运算符</p>
                <button onclick="navigateTo('src/pages/math-generator.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="3d-viewer-card">
                <div class="tool-icon">🧱</div>
                <h2 data-lang="3d_viewer_title">3D观察物体</h2>
                <p data-lang="3d_viewer_desc">创建、编辑和观察3D物体，支持多角度查看</p>
                <button onclick="navigateTo('src/pages/3d-viewer.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="periodic-table-card">
                <div class="tool-icon">⚛️</div>
                <h2 data-lang="periodic_table_title">元素周期表</h2>
                <p data-lang="periodic_table_desc">交互式元素周期表，点击查看元素详情</p>
                <button onclick="navigateTo('src/pages/periodic-table.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="chart-generator-card">
                <div class="tool-icon">📊</div>
                <h2 data-lang="chart_generator_title">图表生成器</h2>
                <p data-lang="chart_generator_desc">自定义数据、颜色和图表类型，生成专业图表</p>
                <button onclick="navigateTo('src/pages/chart-generator.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="teacher-camera-card" style="display: none;">
                <div class="tool-icon">📷</div>
                <h2 data-lang="teacher_camera_title">教师摄像头</h2>
                <p data-lang="teacher_camera_desc">将教师手机摄像头画面投屏到电脑上</p>
                <button onclick="navigateTo('src/pages/teacher-camera-vercel.html')" data-lang="use_now">立即使用</button>
            </div>

            <div class="tool-card" id="analytics-card">
                <div class="tool-icon">📊</div>
                <h2 data-lang="analytics_title">流量统计</h2>
                <p data-lang="analytics_desc">查看网站访问趋势与关键指标</p>
                <button onclick="navigateTo('src/pages/analytics.html')" data-lang="analytics_open">打开面板</button>
            </div>

            <div class="tool-card" id="website-status-card">
                <div class="tool-icon">🟢</div>
                <h2 data-lang="website_status_title">网站状态</h2>
                <p data-lang="website_status_desc">一键检查教师工具箱服务是否在线，并查看状态详情</p>
                <button onclick="checkWebsiteStatus()" data-lang="website_status_check">查看状态</button>
            </div>

            <div class="tool-card" id="donation-card">
                <div class="tool-icon">❤️</div>
                <h2 data-lang="donation_title">打赏支持</h2>
                <p data-lang="donation_desc">如果您喜欢这些工具，欢迎打赏支持</p>
                <button onclick="navigateTo('src/pages/donation.html')" data-lang="support_now">前往支持</button>
            </div>
        </div>
        
        <!-- 切换学生管理按钮 -->
        <button id="toggleStudentsBtn" class="btn toggle-students" data-lang="manage_students">管理学生信息</button>
        
        <!-- 学生管理区域 -->
        <div class="student-management-container hidden">
            <div class="student-management" id="studentManagement">
                <h2 data-lang="student_management">学生管理</h2>
            
            <div class="student-input-section">
                <div class="input-group">
                    <input type="text" id="studentId" placeholder="学号（可选）" data-lang-placeholder="student_id_placeholder">
                    <input type="text" id="studentName" placeholder="学生姓名" data-lang-placeholder="student_name_placeholder">
                    <button id="addStudentBtn" class="btn add" data-lang="add_student">添加学生</button>
                </div>
                
                <div class="batch-import">
                    <h3 data-lang="batch_import_title">批量导入（CSV格式：学号,姓名）</h3>
                    <textarea id="csvInput" placeholder="例如：&#10;2021001,张三&#10;2021002,李四&#10;2021003,王五" data-lang-placeholder="csv_example"></textarea>
                    <button id="importBtn" class="btn import" data-lang="import_csv">导入CSV</button>
                </div>
                
                <div class="file-import">
                    <h3 data-lang="file_import_title">文件导入（支持CSV、TXT、JSON格式）</h3>
                    <input type="file" id="fileInput" accept=".csv,.txt,.json">
                    <button id="importFileBtn" class="btn import" data-lang="import_file">导入文件</button>
                    <div id="fileInfo" style="margin-top: 0.8rem; font-size: 1rem; color: #666;"></div>
                </div>
                
                <button id="clearStudentsBtn" class="btn clear" data-lang="clear_students">清空学生列表</button>
            </div>
            
            <div class="student-list-container">
                <div id="studentList">
                    <div class="empty-list" data-lang="no_students">暂无学生，请添加学生</div>
                </div>
            </div>
            
            <div class="student-summary">
                <div class="summary-card">
                    <div class="summary-value" id="totalStudents">0</div>
                    <div class="summary-label" data-lang="total_students">总学生数</div>
                </div>
                <div class="summary-card">
                    <div class="summary-value" id="totalGroups">0</div>
                    <div class="summary-label" data-lang="suggested_groups">建议分组数</div>
                </div>
            </div>
        </div>
    </div>
        
        </div>
        </div>
        
        
        
        <!-- 反馈建议按钮 -->
        <button id="feedbackBtn" class="btn feedback" data-lang="feedback">反馈建议</button>
        
        
    </div>
    
    <div class="container">
        <div class="instructions">
            <h3 data-lang="instructions">使用说明</h3>
            <ol>
                <li><strong data-lang="student_management_guide">学生管理</strong> - <span data-lang="student_management_desc">点击"管理学生信息"按钮显示学生管理界面，支持单个添加、批量导入和文件导入</span></li>
                <li><strong data-lang="sound_detector_guide">声音检测器</strong> - <span data-lang="sound_detector_desc2">实时检测环境声音强度，声音越高小球越高，可用于课堂活跃度监测</span></li>
                <li><strong data-lang="roll_call_guide">随机点名器</strong> - <span data-lang="roll_call_desc2">随机选择学生回答问题，增加课堂互动，支持导入学生名单</span></li>
                <li><strong data-lang="timer_guide">课堂计时器</strong> - <span data-lang="timer_desc2">管理课堂活动时间，提高教学效率，支持全屏模式和预设时间</span></li>
                <li><strong data-lang="clock_guide">全屏时钟</strong> - <span data-lang="clock_desc2">超大显示时钟，支持8种颜色主题、12/24小时制切换、一键全屏显示</span></li>
                <li><strong data-lang="grouping_guide">小组分组器</strong> - <span data-lang="grouping_desc2">随机分组学生，便于小组活动，支持自定义分组人数</span></li>
                <li><strong data-lang="whiteboard_guide">电子白板</strong> - <span data-lang="whiteboard_desc2">在线绘制和演示，支持多点触控、多种颜色和线条粗细调节</span></li>
                <li><strong data-lang="tracker_guide">课堂表现记录器</strong> - <span data-lang="tracker_desc2">记录学生课堂表现，帮助教师了解学生参与度</span></li>
                <li><strong data-lang="feedback_guide">反馈建议</strong> - <span data-lang="feedback_desc">点击"反馈建议"按钮提交您的宝贵意见</span></li>
            </ol>
        </div>
    </div>
    
    <footer>
        <p data-lang="footer_text">&copy; 2025 教师工具箱 - 专为教师设计</p>
        <div class="signature-badge">⭐️ Made By CrisXie & Zhang Monday ⭐️</div>
    </footer>
    
    <!-- 公告弹窗 -->
    <div class="announcement-modal-overlay" id="announcementModal">
        <div class="announcement-modal">
            <button class="announcement-modal-close" onclick="closeAnnouncementModal()">&times;</button>
            <div class="announcement-modal-header">
                <span class="icon">📢</span>
                <h3 id="announcementModalTitle">公告</h3>
            </div>
            <div class="announcement-modal-content" id="announcementModalContent">
                <!-- 公告内容将通过JavaScript动态加载 -->
            </div>
            <div class="announcement-modal-footer">
                <button class="announcement-modal-btn primary" onclick="closeAnnouncementModal()" id="announcementCloseBtn">我知道了</button>
                <button class="announcement-modal-btn danger" onclick="permanentlyCloseAnnouncement()" id="announcementPermanentBtn">不再显示此公告</button>
            </div>
        </div>
    </div>
    
    <!-- 捐赠提示弹窗 -->
    <div class="donation-modal-overlay" id="donationModal">
        <div class="donation-modal">
            <button class="donation-modal-close" onclick="closeDonationModal()">&times;</button>
            <div class="donation-modal-icon">❤️</div>
            <h3 id="donationModalTitle" data-lang="donation_modal_title">喜欢这个工具吗？</h3>
            <p id="donationModalMessage" data-lang="donation_modal_message">如果这些工具对您的教学有帮助，欢迎打赏支持作者继续开发更多实用功能！</p>
            <div class="donation-modal-buttons">
                <button class="donation-modal-btn primary" onclick="goToDonation()" id="donationModalBtn" data-lang="donation_modal_btn">去支持一下</button>
                <button class="donation-modal-btn secondary" onclick="closeDonationModal()" id="donationModalLater" data-lang="donation_modal_later">下次再说</button>
            </div>
            <div class="donation-modal-tip" id="donationModalTip" data-lang="donation_modal_tip">💡 您的支持是作者持续更新的动力</div>
        </div>
    </div>
    
    <script>
        // 确保 i18n 系统加载后应用语言
        window.addEventListener('load', () => {
            if (window.i18n && typeof window.i18n.applyLanguage === 'function') {
                window.i18n.applyLanguage();
            }
        });
    </script>
</body>
</html>
